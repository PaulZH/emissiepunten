<script>appMapHelper={properties:{wgs84Sphere:{type:Object}},ready:function(){this.wgs84Sphere=new ol.Sphere(6378137)},isWithinRadius:function(e){return this.getPointDistance(this.location.point,e)/1e3<=this.location.radius},getPointDistance:function(e,t){var r=ol.proj.transform(e,"EPSG:31370","EPSG:4326"),n=ol.proj.transform(t,"EPSG:31370","EPSG:4326");return this.wgs84Sphere.haversineDistance(r,n)},sortFeaturesByPosition:function(e){var t=this;return e.sort(function(e,r){var n=t.getFeaturePoint(e),i=t.getFeaturePoint(r);return n[1]<i[1]?1:n[1]>i[1]?-1:n[0]<i[0]?1:n[0]>i[0]?-1:0})},getFeaturePoint:function(e){switch(e.get("name")){case"site":return[e.get("site").x,e.get("site").y];case"ep":return[e.get("ep").x,e.get("ep").y];case"line":return[e.get("lineStart").x,e.get("lineStart").y];default:return[0,0]}},findFeatures:function(e,t){var r=e.getSource().getFeatures();return t?("string"==typeof t&&(t=[t]),r.filter(function(e){return-1!==t.indexOf(e.get("name"))})):r},findFeatureByUri:function(e,t,r){var n=null;return e.getSource().getFeatures().forEach(function(e){n||e.get("name")===t&&e.get(t).uri===r&&(n=e)}),n},getFeatureAtPixel:function(e,t){var r=null;return this.olMap.forEachFeatureAtPixel(e,function(e){if(e.get("name")===t)return r=e,!0}),r},setFeatureStyle:function(e,t){var r=e.getStyle().getZIndex(),n=e.get(t);n.setZIndex(r),e.setStyle(n),e.set("currentStyle",t)}}</script>
